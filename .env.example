# =============================================================================
# CoachNTT-MCP Environment Configuration Template
# =============================================================================
# Instructions:
# 1. Copy this file: cp .env.example .env
# 2. Edit values based on your deployment method (see sections below)
# 3. Never commit .env to version control
# =============================================================================

# =============================================================================
# GENERAL CONFIGURATION (All deployment methods)
# =============================================================================

# Application environment
# Options: development | production | test
# For local Docker dev: use 'development'
# For VPS/production: use 'production'
NODE_ENV=production

# Logging level - controls verbosity of logs
# Options: debug | info | warn | error
# For debugging issues: use 'debug'
# For production: use 'info' or 'warn'
LOG_LEVEL=info

# =============================================================================
# SECURITY CONFIGURATION (All deployment methods)
# =============================================================================

# WebSocket authentication token - MUST CHANGE THIS!
# How to generate: openssl rand -hex 32
# Or use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# This secures WebSocket connections between UI and server
MCP_WEBSOCKET_AUTH=change-this-secret-key

# =============================================================================
# LOCAL DEVELOPMENT (Docker Desktop / Native)
# =============================================================================
# These settings are used when running locally

# =============================================================================
# PORT CONFIGURATION (Standardized port mapping)
# =============================================================================
# See docs/PORT_MAPPING.md for complete port architecture

# WebSocket server configuration
# For Docker: use '0.0.0.0' to allow container networking
# For native: use 'localhost' or '127.0.0.1'
MCP_WEBSOCKET_HOST=0.0.0.0
MCP_WEBSOCKET_PORT=8080

# Health check API port (automatically set to WebSocket port + 1)
# Only override if you need a specific port
MCP_HEALTH_PORT=8081

# UI development server port (Vite)
# Not used in production (nginx serves static files)
MCP_UI_PORT=5173
MCP_UI_HOST=localhost

# Legacy aliases (for backward compatibility)
WS_HOST=${MCP_WEBSOCKET_HOST}
WS_PORT=${MCP_WEBSOCKET_PORT}
HEALTH_PORT=${MCP_HEALTH_PORT}

# =============================================================================
# DATABASE CONFIGURATION (All deployment methods)
# =============================================================================

# SQLite database file path
# Docker: use container path (/app/data/myworkflow.db)
# Native: use absolute path (/home/user/coachntt/data/myworkflow.db)
DB_PATH=/app/data/myworkflow.db

# =============================================================================
# VPS DEPLOYMENT ONLY
# =============================================================================
# Only needed when deploying to a VPS with public domain

# Your domain name (without https://)
# Example: app.example.com
# Obtain: Purchase from domain registrar (Namecheap, GoDaddy, etc.)
# Setup: Point A record to your VPS IP address
DOMAIN_NAME=your-domain.com

# Public WebSocket URL that browser will connect to
# Must use wss:// for HTTPS sites
# Format: wss://your-domain.com/ws
PUBLIC_WS_URL=wss://your-domain.com/ws

# Email for Let's Encrypt SSL certificates
# Requirements: Valid email you control
# Purpose: SSL renewal notifications
# Note: Agrees to Let's Encrypt Terms of Service
SSL_EMAIL=admin@your-domain.com

# =============================================================================
# DOCKER REGISTRY (Advanced - CI/CD)
# =============================================================================
# Only needed if pushing images to a registry

# Docker registry URL
# Options:
# - docker.io (Docker Hub)
# - ghcr.io (GitHub Container Registry) 
# - Your private registry URL
DOCKER_REGISTRY=ghcr.io

# Docker organization or username
# For GitHub: your GitHub username
# For Docker Hub: your Docker Hub username
DOCKER_ORG=yourusername

# Image version tag
# Options:
# - latest (default)
# - v1.0.0 (semantic versioning)
# - git commit SHA
VERSION=latest

# =============================================================================
# BACKUP CONFIGURATION (Production)
# =============================================================================

# Cron schedule for automatic backups
# Format: minute hour day month weekday
# Default: "0 2 * * *" (2 AM daily)
# Tool: https://crontab.guru/ for help
# Examples:
# - "0 */6 * * *" (every 6 hours)
# - "0 2 * * 0" (2 AM every Sunday)
BACKUP_SCHEDULE=0 2 * * *

# =============================================================================
# RESOURCE LIMITS (Production - Optional)
# =============================================================================
# Prevent runaway containers from consuming all resources

# Maximum memory allocation
# Format: <number><unit> where unit is b, k, m, g
# Examples: 256M, 1G, 2048M
# Recommendation: Start with 512M, increase if needed
MAX_MEMORY=512M

# Maximum CPU allocation
# Format: decimal number (1.0 = 1 CPU core)
# Examples: 0.5 (half core), 2.0 (2 cores)
# Recommendation: Start with 1.0 for small VPS
MAX_CPU=1.0

# =============================================================================
# QUICK START EXAMPLES
# =============================================================================

# Example 1: Local Docker Development
# NODE_ENV=development
# LOG_LEVEL=debug
# MCP_WEBSOCKET_AUTH=dev-secret-key-123
# WS_HOST=0.0.0.0
# (Keep other defaults)

# Example 2: VPS Production Deployment
# NODE_ENV=production
# LOG_LEVEL=info
# MCP_WEBSOCKET_AUTH=<generated-secure-key>
# DOMAIN_NAME=coachntt.example.com
# PUBLIC_WS_URL=wss://coachntt.example.com/ws
# SSL_EMAIL=admin@example.com

# =============================================================================